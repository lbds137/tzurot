{
  "$schema": "https://unpkg.com/knip@5/schema.json",
  "ignoreWorkspaces": ["scripts", "tests"],
  "workspaces": {
    ".": {
      "vitest": false,
      "ignoreDependencies": ["@typescript-eslint/eslint-plugin", "@typescript-eslint/parser"]
    },
    "services/bot-client": {
      "entry": ["src/**/*.test.ts", "src/**/*.int.test.ts", "src/commands/*/index.ts"],
      "ignoreDependencies": ["redis"]
    },
    "services/api-gateway": {
      "entry": ["src/**/*.test.ts", "src/**/*.int.test.ts"],
      "ignoreDependencies": ["openai", "pino", "redis"]
    },
    "services/ai-worker": {
      "entry": ["src/**/*.test.ts", "src/**/*.int.test.ts"],
      "ignoreDependencies": ["langchain", "onnxruntime-node", "redis", "sharp"]
    },
    "packages/common-types": {
      "entry": ["src/**/*.test.ts", "src/**/*.int.test.ts"],
      "includeEntryExports": true,
      "ignoreDependencies": ["openai", "pg", "redis"],
      "ignoreMembers": ["ECONNRESET", "ETIMEDOUT", "ENOTFOUND", "ECONNREFUSED"]
    },
    "packages/tooling": {
      "entry": ["src/**/*.test.ts"],
      "ignoreDependencies": ["eslint"]
    },
    "packages/embeddings": {
      "entry": ["src/**/*.test.ts", "src/embeddingWorker.ts"],
      "includeEntryExports": true,
      "ignoreDependencies": ["@huggingface/transformers", "onnxruntime-node"]
    },
    "packages/test-utils": {
      "includeEntryExports": true
    }
  },
  "ignore": [
    "**/dist/**",
    "**/generated/**",
    "prisma/**",
    "tzurot-legacy/**",
    "scripts/data/**",
    "**/vitest.config.ts",
    "**/vitest.int.config.ts",
    "**/test/setup.ts",
    "vitest.workspace.ts"
  ],
  "ignoreBinaries": ["dot", "diff", "railway"],
  "ignoreDependencies": [
    "@secretlint/secretlint-rule-preset-recommend",
    "eslint-formatter-pretty",
    "pino-pretty"
  ]
}
